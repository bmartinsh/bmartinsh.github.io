(this.webpackJsonponboard=this.webpackJsonponboard||[]).push([[9],{497:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"b",(function(){return E}));var a=n(9),r=n(4),o=n(86),s=n(1),i=n.n(s),l=n(40),c=n(16),u={visa:{img:"visa.svg",label:"Visa"},amex:{img:"amex.svg",label:"American Express"},diners:{img:"diners.svg",label:"Diners Club"},discover:{img:"discover.svg",label:"Discover"},jcb:{img:"jcb.svg",label:"JCB"},mastercard:{img:"mastercard.svg",label:"MasterCard"},unionpay:{img:"unionpay.svg",label:"UnionPay"},unknown:{img:"generic.svg",label:"Card"}},d={INDIVIDUAL:"individual",COMPANY:"company"};function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=h(),r=a.data;if(!r)return null;var s,i=r.restrictions,l=Object(o.a)([e.country,t.country].filter(Boolean));try{for(l.s();!(s=l.n()).done;){var c=s.value,u=i[c]||{},d=u.block,p=u.requires_kyc,m=u.requires_business;if("all"===d||p)return"Unfortunately we are unable to offer services to the country you specified.";if(n&&"company"!==n&&m)return"Unfortunately we are unable to offer services to the country you specified."}}catch(g){l.e(g)}finally{l.f()}}function h(){var e=Object(s.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(s.useState)(null),i=Object(r.a)(o,2),c=i[0],u=i[1],d=Object(s.useState)(!0),p=Object(r.a)(d,2),h=p[0],m=p[1];return Object(s.useEffect)((function(){l.a.getBillingRestrictions().then((function(e){m(!1),u(e)})).catch((function(e){m(!1),a(String(e))}))}),[]),{error:n,data:c,isLoading:h}}var m=Object(c.a)((function(e){return l.a.getPaymentMethods(e)}));function g(e){var t=(e.city?1:0)+(e.state?1:0)+(e.postal_code?1:0);return"US"===e.country?3===t:t>=2}function f(e){var t={};return["country","line1","line2","city","state","postal_code"].forEach((function(n){("string"===typeof e[n]&&e[n]||"number"===typeof e[n])&&(t[n]=e[n])})),t}function b(e){return"free"===e.id}function v(e){return"custom"===e.id}function y(e){return"unlimited"===e.title.toLowerCase()}function E(e){var t=e.brand,n=Object(a.a)(e,["brand"]),r=u[t]||u.unknown,o=r.img,s=r.label;return i.a.createElement("img",Object.assign({alt:s,src:"".concat("https://openaiapi-site.azureedge.net/public-assets/d/b66dc2b5ba","/payment-methods/").concat(o)},n))}},499:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(1);function r(){var e=Object(a.useRef)([]),t=Object(a.useRef)((function(t,n){var a=setTimeout(t,n);e.current.push(a)}));return Object(a.useEffect)((function(){var t=e.current;return function(){t.forEach((function(e){clearTimeout(e)}))}}),[]),t.current}},527:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(9),r=n(1),o=n.n(r);n(528);function s(e){var t=e.icon,n=e.color,r=e.children,s=e.className,i=void 0===s?"":s,l=Object(a.a)(e,["icon","color","children","className"]);return o.a.createElement("div",Object.assign({className:"icon-indent "+i},l),o.a.createElement("div",{className:"icon-indent-icon",style:{color:n}},o.a.createElement(t,null)),o.a.createElement("div",{className:"icon-indent-content"},r))}},528:function(e,t,n){},605:function(e,t,n){},719:function(e,t,n){},720:function(e,t,n){},721:function(e,t,n){},722:function(e,t,n){},738:function(e,t,n){},739:function(e,t,n){},740:function(e,t,n){},741:function(e,t,n){},848:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(50),o=n(4),s=n(86),i=n(20),l=n(24),c=n(30),u=n(31),d=n(1),p=n.n(d),h=n(6),m=n(23),g=n(17),f=n(840),b=n(22),v=n.n(b),y=n(41),E=n(11),S=n(13),C=n(40),k=n(109),P=n(185),w=n(36),O=n(12),j=n(49),x=n(77),T=n(127),F=n(184),q=n(9);n(605);function M(e){var t=e.children,n=Object(q.a)(e,["children"]),a=Object(d.useState)(!1),r=Object(o.a)(a,2),s=r[0],i=r[1],l=Object(d.useCallback)((function(e){var t=e.target.scrollTop>0;t!==s&&i(t)}),[s]);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",Object.assign({onScroll:l},n),t),p.a.createElement("div",{className:Object(h.a)("scroll-shadow",s&&"visible")}))}var L=n(25),I=n(37),N=n(108),A=n(72),D=n(45);function R(e){return 0===e.id.indexOf("preset-")?e.id.split("-")[1]:e.id}function _(e){if(e)return 0===e.indexOf("default-")?e:"preset-".concat(e)}var U=n(34),W=n(183),K=n(111),G=n(219),B=n(73),z=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).state={modelParameters:P.a.create(),requestPending:!1},a.makeRequest=function(e,t,n,r,o){var s=a.state.modelParameters.engine.value;a.setState({requestPending:!0});var i={prompt:e,max_tokens:a.state.modelParameters.responseLength.value,temperature:a.state.modelParameters.temperature.value,top_p:a.state.modelParameters.topP.value,frequency_penalty:a.state.modelParameters.frequencyPenalty.value,presence_penalty:a.state.modelParameters.presencePenalty.value,best_of:a.state.modelParameters.bestOf.value,echo:!0};return null!=t&&(i.logprobs=t),n&&n.length&&(i.stop=n),C.a.createCompletionStream(s,i,r,o)},a.defaultEngine=Object(I.c)(a.props.user),null===a.state.modelParameters.engine.value&&(a.state.modelParameters.engine.value=a.defaultEngine);var r=function(e){a.state.modelParameters[e].onChange=function(t){var n=a.state.modelParameters[e].value;a.setModelParameter(e,t),a.onModelParamChange&&a.onModelParamChange(e,t,n)}};for(var o in a.state.modelParameters)r(o);return a.editors=[],a.editors.push({value:"",pairs:null,originalText:"",textarea:p.a.createRef(),backdrop:p.a.createRef()}),a.responses=[],a.responses.push({value:""}),a}return Object(l.a)(n,[{key:"setModelParameter",value:function(e,t){this.setState((function(n){return{modelParameters:Object(a.a)(Object(a.a)({},n.modelParameters),{},Object(B.a)({},e,Object(a.a)(Object(a.a)({},n.modelParameters[e]),{},{value:t})))}}))}}]),n}(p.a.Component),H=n(100),V=n(7),Q=n(606),J=n(76),Y={DropdownIndicator:null,ClearIndicator:function(e){return p.a.createElement(V.l.ClearIndicator,e,p.a.createElement(H.c,{size:"20px"}))},MultiValueRemove:function(e){return p.a.createElement(V.l.MultiValueRemove,e,p.a.createElement(H.c,{size:"14px"}))}},$=function(e){return{label:e,value:e}},X=function(){return"Enter a sequence"},Z=function(e){return'Add "'.concat(e,'"')},ee={control:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{boxShadow:"none"},t.isFocused?{}:{borderColor:"var(--gray-300)"})}},te=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={inputValue:""},e.handleChange=function(t){e.props.onUpdateValues(t)},e.handleInputChange=function(t){e.setState({inputValue:t})},e.handleKeyDown=function(t){var n=e.state.inputValue;if(n)switch(t.key){case"Enter":e.setState({inputValue:n+"\u21b5"});break;case"Tab":t.preventDefault(),e.setState({inputValue:""}),e.props.onUpdateValues([].concat(Object(r.a)(e.props.value||[]),[$(n)]))}else"Enter"===t.key&&e.setState({inputValue:"\u21b5"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.inputValue;return p.a.createElement(Q.a,{components:Y,inputValue:e,isClearable:!0,isMulti:!0,onChange:this.handleChange,onInputChange:this.handleInputChange,onKeyDown:this.handleKeyDown,value:this.props.value,noOptionsMessage:X,formatCreateLabel:Z,placeholder:"",styles:ee,theme:J.c})}}]),n}(d.PureComponent),ne=[{value:"off",label:"Off"},{value:"orig",label:"Most likely"},{value:"inv",label:"Least likely"},{value:"full",label:"Full spectrum"}];function ae(e){var t=e.disabled,n=e.value,a=e.onChange,r=Object(d.useMemo)((function(){return ne.find((function(e){return e.value===n}))||ne[0]}),[n]),o=Object(d.useCallback)((function(e){e&&"off"!==e.value?a(e.value):a(null)}),[a]);return p.a.createElement(J.b,{options:ne,value:r,onChange:o,isDisabled:t})}var re=n(181),oe=n(163),se=["engine","temperature","responseLength","stop","topP","frequencyPenalty","presencePenalty","bestOf","startSequence","restartSequence","logProbs"],ie=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onChangeStopSequences=function(t){if(t){var n=t.map((function(e){return e.value}));e.props.onChangeStop(n)}else e.props.onChangeStop([])},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.appParameters,t=null,n=this.props.stopSequence.map((function(e){var t=e.replace(/(\r\n|\n|\r)/gm,"\u21b5");return{value:t,label:t}})),a=p.a.createElement("div",{className:"stop-sequence-container",key:"stop"},p.a.createElement(oe.a,{content:"Up to four sequences where the API will stop generating further tokens. The returned text will not contain the stop sequence."},p.a.createElement("div",null,p.a.createElement("div",{className:"body-small control-label"},p.a.createElement("div",null,"Stop sequences"),p.a.createElement("div",{className:"control-note"},"Enter sequence and press Tab")),p.a.createElement(te,{onUpdateValues:this.onChangeStopSequences,onChange:this.onChangeStopSequences,value:n})))),r=this.props.startSequence?this.props.startSequence.replace(/(\r\n|\n|\r)/gm,"\u21b5"):"",o=p.a.createElement(oe.a,{content:"Text to append after the user's input to format the model for a response.",key:"start"},p.a.createElement("div",null,p.a.createElement("div",{className:"body-small control-label"},"Inject start text"),p.a.createElement("div",{className:"inject-text-ta-wrap"},p.a.createElement("textarea",{rows:"1",className:Object(h.a)("inject-text-ta",!this.props.startSequenceEnabled&&"off"),value:r,onChange:this.props.onChangeStart}),p.a.createElement(re.a,{className:"inject-text-cb",checked:this.props.startSequenceEnabled,onChange:this.props.onChangeStartEnabled})))),s=this.props.restartSequence?this.props.restartSequence.replace(/(\r\n|\n|\r)/gm,"\u21b5"):"",i=p.a.createElement(oe.a,{content:"Text to append after the model's generation to continue the patterned structure.",key:"restart"},p.a.createElement("div",null,p.a.createElement("div",{className:"body-small control-label"},"Inject restart text"),p.a.createElement("div",{className:"inject-text-ta-wrap"},p.a.createElement("textarea",{rows:"1",className:Object(h.a)("inject-text-ta",!this.props.restartSequenceEnabled&&"off"),value:s,onChange:this.props.onChangeRestart}),p.a.createElement(re.a,{className:"inject-text-cb",checked:this.props.restartSequenceEnabled,onChange:this.props.onChangeRestartEnabled}))));if(this.props.onChangeProbs){var l=Object(I.d)(e.engine.value);t=p.a.createElement(oe.a,{key:"logProbs",interactive:!0,onMouseLeaveDelay:200,content:l?p.a.createElement(p.a.Fragment,null,"This Playground setting is currently unavailable when using the Codex models, but you can still"," ",p.a.createElement("a",{href:"/docs/api-reference/completions/create#completions/create-logprobs",target:"_blank",rel:"noopener noreferrer"},"access logprobs in the API.")):"Toggle token highlighting which indicates how likely a token was to be generated. Helps to debug a given generation, or see alternative options for a token."},p.a.createElement("div",null,p.a.createElement("div",{className:Object(h.a)("body-small control-label",l&&"control-disabled")},"Show probabilities"),p.a.createElement(ae,{value:l?null:this.props.probsType,onChange:this.props.onChangeProbs,disabled:l})))}return p.a.createElement("div",{className:"parameter-panel"},p.a.createElement("div",{className:"parameter-panel-grid"},se.map((function(n){switch(n){case"stop":return a;case"startSequence":return o;case"restartSequence":return i;case"logProbs":return t}var r=e[n];if(!r)return null;r.onBeforeRender&&r.onBeforeRender.call(r,e);var s=r.component;return p.a.createElement(s,{key:"param-".concat(r.backendName),config:r})})).filter(Boolean)))}}]),n}(p.a.PureComponent),le=n(182),ce=n(216),ue=n.n(ce),de=n(607);var pe=function(e){var t=e.gap,n=e.frameHeight,a=e.frameWidth,r=(e.frameLeft,e.frameTop),o=e.boxHeight,s=e.selectionTop,i=e.selectionLeft,l=e.selectionHeight,c={position:"fixed"};return c.left=i,c.top=s+l+t,c.left>a-300&&(delete c.left,c.left=a-320),c.top+o>n&&s-(t+o)>r&&(c.top=s-(t+o)),c},he=(n(623),n(624)),me=n(718),ge=n(477),fe=n.n(ge),be=n(482),ve=n.n(be),ye=n(479),Ee=n.n(ye),Se=n(478),Ce=n.n(Se),ke=n(518),Pe=n.n(ke),we=n(476),Oe=n.n(we),je="unsafe",xe="toxic",Te=function(e){return(100*e).toFixed(2)+"%"},Fe=function(){function e(t,n,a,r){Object(i.a)(this,e),this.pairs=t,this.showProbs=n,this.probsType=a,this.editor=r}return Object(l.a)(e,[{key:"getDecorations",value:function(e,t){for(var n=Array(e.getText().length).fill(null),a=t.getBlockMap(),r=null,o=0,s=a.map((function(t){var n=e.getKey()===t.getKey(),a=n?e.getText():t.getText();return n&&(r=o),o+=a.length+1,a})).join("\n"),i=0,l=0;l<this.pairs.length&&!(i>=r+n.length);l++){var c=this.pairs[l].text;if(s.substring(i,i+c.length)!==c){this.editor.truncateCallback(i);break}i>=r&&qe(n,i-r,i+c.length-r,this.pairs[l]),i+=c.length}return Object(me.a)(n)}},{key:"getComponentForKey",value:function(e){return Ae}},{key:"getPropsForKey",value:function(e){return{pair:e,probsType:this.probsType,showProbs:this.showProbs}}}]),e}();function qe(e,t,n,a){for(var r=t;r<n;r++)e[r]=a}function Me(e){return"Enter"===e.key&&(e.ctrlKey||e.metaKey)?"ignore":"Escape"===e.key?"escape":Object(he.getDefaultKeyBinding)(e)}var Le,Ie=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).editorState=a.blankEditorState(),a.onNewEditorState=function(e){a.editorState=e,a.forceUpdate()},a.onChange=function(e){if(e!==a.editorState){var t=e.getCurrentContent().getPlainText()!==a.editorState.getCurrentContent().getPlainText();a.onNewEditorState(e),a.props.onTextChange&&t&&a.props.onTextChange(e)}},a.truncateCallback=function(e){a.props.truncateGeneratedIndices(e)},a.scrollToBottom=function(){var e=a.editorContainerRef.current.querySelector(".public-DraftEditor-content");e&&e.scrollHeight>e.clientHeight&&(e.scrollTop=e.scrollHeight)},a.onTextUnselect=function(){a.onTextSelect()},a.handlePastedText=function(e,t,n){var o;if(e.includes("<context>")){var s=function(e){var t=Object(me.a)(),n=[];e.split(/(<context>)([\s\S]*?)(<\/context>)/g).forEach((function(e,a){var o;if("<context>"!==e&&"</context>"!==e&&""!==e){e=Pe()(e);var s=Oe.a.EMPTY;t=(o=t).push.apply(o,Object(r.a)(Array(e.length).fill(s))),n.push(e)}}));var a=[n.join("")].map((function(e){return new(Ee()("draft_tree_data_support")?fe.a:ve.a)({key:Ce()(),text:e,type:"unstyled",characterList:t})}));return he.ContentState.createFromBlockArray(a)}(e).blockMap;o=he.Modifier.replaceWithFragment(n.getCurrentContent(),n.getSelection(),s)}else{var i=he.ContentState.createFromText(e);o=he.Modifier.replaceWithFragment(n.getCurrentContent(),n.getSelection(),i.getBlockMap())}var l=he.EditorState.push(n,o,"insert-fragment");return a.onChange(l),"handled"},a.state={pairs:[],selectedPairs:[]},a.editorContainerRef=p.a.createRef(),a.focus=function(){return a.refs.editor.focus()},a._previousSelectedPairs=null,a._previousPopoverContents=null,a.handleKeyCommand=a.handleKeyCommand.bind(Object(le.a)(a)),a.onTextSelect=ue()(a.onTextSelect.bind(Object(le.a)(a)),100),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.focus(),this.props.initialText&&this.hijackInitialState(this.props.initialText)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.showProbs!==e.showProbs){var n=this.editorState,a=n.getDecorator();n=he.EditorState.set(n,{decorator:new Fe(a.pairs,this.props.showProbs,this.props.probsType,this)}),this.onNewEditorState(n)}}},{key:"blankEditorState",value:function(){return he.EditorState.createWithContent(he.ContentState.createFromText(""),new Fe([],null,null,this))}},{key:"hijackInitialState",value:function(e){var t=he.EditorState.createWithContent(he.ContentState.createFromText(e),new Fe([],null,null,this)),n=he.EditorState.moveFocusToEnd(t);this.isManualFocusChange(),this.onNewEditorState(n)}},{key:"isManualFocusChange",value:function(){var e=this;this.didChangeFocusManually=!0,setTimeout((function(){e.didChangeFocusManually=!1}),200)}},{key:"switchModeToGenerating",value:function(e){var t=this.editorState,n=he.EditorState.push(t,t.getCurrentContent(),"change-inline-style");n=he.RichUtils.toggleInlineStyle(n,"BOLD"),this.onNewEditorState(n)}},{key:"injectText",value:function(e){var t=this.editorState;if(e){var n=t.getCurrentContent(),a=he.EditorState.moveSelectionToEnd(t).getSelection(),r=he.Modifier.insertText(n,a,e);t=he.EditorState.push(t,r,"insert-characters"),t=he.EditorState.moveFocusToEnd(t),this.onNewEditorState(t)}return t.getCurrentContent().getPlainText()}},{key:"getTrainTextAndLossW",value:function(){var e=this.state.getCurrentContent().getBlocksAsArray(),t=[],n=[];return e.forEach((function(e,a){a>0&&(t.push("\n"),n.push(n.length>0?n[n.length-1]:1));for(var r=e.getText(),o=0;o<r.length;o++){var s=r[o],i=e.getInlineStyleAt(o).has("BOLD");t.push(s),n.push(i?0:1)}})),[[t],[n]]}},{key:"getText",value:function(){return this.editorState.getCurrentContent().getPlainText()}},{key:"handleKeyCommand",value:function(e){if("ignore"===e)return"handled";if("escape"===e){if(this.state.selectedPairs.length>0)this.setState({selectedPairs:[]});else{var t=he.EditorState.moveFocusToEnd(this.editorState);this.onNewEditorState(t)}return"handled"}var n=he.RichUtils.handleKeyCommand(this.editorState,e);return n?(this.onNewEditorState(n),"handled"):"not-handled"}},{key:"pushTokens",value:function(e,t){var n=this,a=t?e:this.state.pairs.concat(e),r=new Fe(a,this.props.showProbs,this.props.probsType,this),o=t?this.blankEditorState():this.editorState,s=e.map((function(e){return e.text})).join(""),i=o.getCurrentContent(),l=o.getSelection(),c=!(l.getEndKey()===i.getLastBlock().getKey()&&l.getEndOffset()===i.getLastBlock().getText().length),u=he.EditorState.moveSelectionToEnd(o).getSelection(),d=he.Modifier.insertText(i,u,s);o=he.EditorState.push(o,d,"insert-characters"),o=c?he.EditorState.forceSelection(o,l):he.EditorState.moveFocusToEnd(o),o=he.EditorState.set(o,{decorator:r}),this.setState({pairs:a},(function(){n.scrollToBottom()})),this.onNewEditorState(o)}},{key:"highlightLastCompletion",value:function(e){this.state.pairs.forEach((function(t){t.isLatestCompletion&&(t.contentFilterLabel=e)}));var t=new Fe(this.state.pairs,this.props.showProbs,this.props.probsType,this),n=he.EditorState.set(this.editorState,{decorator:t});this.onNewEditorState(n)}},{key:"onTextSelect",value:function(){var e=function(e){for(var t,n=[],a=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=a.nextNode();)n.push(t);return n}(this.editorContainerRef.current),t=window.getSelection();if("None"===t.type||this.didChangeFocusManually)this.setState({selectedPairs:[]});else{var n=t.getRangeAt(0),a=0,r=null,o=null;e.forEach((function(e){null===r&&n.startContainer===e&&(r=a+n.startOffset),null===o&&n.endContainer===e&&(o=a+n.endOffset),a+=e.textContent.length}));var s=this.getText(),i=[],l=0,c=!1;this.state.pairs.forEach((function(e){s.substring(l,l+e.text.length)!==e.text&&(c=!0),!c&&r<e.text.length+l&&o>l&&i.push(e),l+=e.text.length})),this.setState({selectedPairs:i})}}},{key:"popoverContents",value:function(){var e=this.state.selectedPairs;if(!e[0].tokens)return p.a.createElement("div",{className:"popover-window"},p.a.createElement("div",{className:"popup-probs"},"Probabilities were not requested for this completion. Please submit again if you'd like to access token probabilities."));var t=[],n=e.reduce((function(e,t){return e+(t.tokens?t.tokens.length:0)}),0);e.forEach((function(e){var n=e.logprob;"number"===typeof n&&t.push(n)}));var a=t.reduce((function(e,t){return e+t}),0),r=n===e.length?"":", decoding to ".concat(e.length," valid UTF-8 segments"),i="Total: ".concat(a.toFixed(2)," logprob on ").concat(n," tokens").concat(r);if(1===e.length&&e[0].logits.length){var l=e[0],c=l.logits[l.logits.length-1];if(null!==c){var u,d=Object.entries(c).sort((function(e,t){var n=Object(o.a)(e,2),a=(n[0],n[1]),r=Object(o.a)(t,2);r[0];return a>r[1]?-1:1})).slice(0,10),h=!1,m=Object(s.a)(d);try{for(m.s();!(u=m.n()).done;){u.value[0]===l.text&&(h=!0)}}catch(f){m.e(f)}finally{m.f()}h||d.push([l.text,l.logprob]);var g=d.map((function(e){var t=Object(o.a)(e,2);t[0];return t[1]})).reduce((function(e,t){return e+Math.exp(t)}),0);return p.a.createElement("div",{className:"popover-window"},p.a.createElement("ul",null,d.map((function(e,t){var n=Object(o.a)(e,2),a=n[0],r=n[1],s="popup-option"+(l.text===a?" highlighted":"");return p.a.createElement("li",{className:s,key:t},a.replace("\n","\\n")," = ",Te(Math.exp(r)))}))),p.a.createElement("div",{className:"popup-header"},p.a.createElement("div",null,i),p.a.createElement("div",{className:"top10"},"(",Te(g)," probability covered in top"," ",d.length," logits)")))}}return p.a.createElement("div",{className:"popover-window"},p.a.createElement("div",{className:"popup-header"},i))}},{key:"render",value:function(){var e="",t=this.state.selectedPairs.length>0;return t&&(function(e,t){if(null===e&&null===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(;0<e.length;e++)if(e[0]!==t[0])return!1;return!0}(this.state.selectedPairs,this._previousSelectedPairs)&&this.props.showProbs===this._previousShowProbs||(this._previousSelectedPairs=this.state.selectedPairs,this._previousPopoverContents=this.popoverContents(),this._previousShowProbs=this.props.showProbs),e=this._previousPopoverContents),p.a.createElement("div",{className:"completions",style:Ne.root},p.a.createElement("div",{className:"editor-container",style:Ne.editor,onClick:this.focus,ref:this.editorContainerRef},p.a.createElement("div",{className:"editor-wrapper","data-testid":"editor-wrapper"},p.a.createElement(he.Editor,{editorState:this.editorState,onChange:this.onChange,placeholder:p.a.createElement("div",null,"Enter text and submit (",p.a.createElement(F.b,{keys:[W.a,"Enter"],theme:"light"}),") to get a completion."),ref:"editor",spellCheck:!0,handleKeyCommand:this.handleKeyCommand,keyBindingFn:Me,handlePastedText:this.handlePastedText,blockStyleFn:this.blockStyleFn}))),this.props.showProbs&&p.a.createElement(de.a,{className:"popover-element",isOpen:t,selectionRef:this.editorContainerRef,placementStrategy:pe,onTextSelect:this.onTextSelect,onTextUnselect:this.onTextUnselect},e))}}]),n}(p.a.Component),Ne={root:{},editor:{cursor:"text",fontSize:16,height:"100%",backgroundColor:"white",boxSizing:"border-box"},token:{direction:"ltr",unicodeBidi:"bidi-override"}},Ae=function(e){var t=e.children,n=e.pair,a=e.probsType,r=e.showProbs,s=e.offsetKey,i=n.isPrompt?"bold":"500";if(n.contentFilterLabel){var l={backgroundColor:n.contentFilterLabel===xe?"rgba(236, 44, 0, 0.4)":"rgba(255, 153, 0, 0.3)",fontWeight:i};return p.a.createElement("span",{style:l,"data-offset-key":s,className:"token-toxic"},t)}if(!r){var c={fontWeight:i};return p.a.createElement("span",{style:c,"data-offset-key":s},t)}var u={backgroundColor:function(e,t,n,a){if("full"===t){var r=["#F4A677","#F8C571","#F2CF6A","#ECE077","#DFE370","#C6E15A","#C6E15A","#B4E45A","#9CEB64","#88F275"][Math.floor(100*e/10)];return e<.01&&(r=e?"#e65a5a":"#fff"),r+"5e"}if("orig"===t){var s=Object(o.a)(n,3),i=s[0],l=s[1],c=s[2];return e?"rgba("+i+","+l+","+c+","+e*a+")":"#fff"}if("inv"===t){var u=Object(o.a)(n,3),d=u[0],p=u[1],h=u[2];return e?"rgba("+d+","+p+","+h+","+(1-e)*a+")":"#fff"}}(n.logprob?Math.exp(n.logprob):0,a,[255,163,15],.5),fontWeight:i};return p.a.createElement("span",{style:u,"data-offset-key":s},t)},De=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){return p.a.createElement(Ie,{ref:e.props.editor.textarea,initialText:e.props.initialText,showProbs:Boolean(e.props.showProbs),probsType:e.props.probsType,onTextChange:e.props.onTextChange,truncateGeneratedIndices:e.props.truncateGeneratedIndices})},e}return Object(l.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("ERROR",e)}}],[{key:"getDerivedStateFromError",value:function(e){console.log("ERROR",e)}}]),n}(p.a.Component),Re=[{id:"default-chat",title:"Chat",responseLength:150,temperature:.9,topP:1,prompt:"The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\n\nHuman: Hello, who are you?\nAI: I am an AI created by OpenAI. How can I help you today?\nHuman: ",startSequence:"\nAI:",stopSequence:["\n"," Human:"," AI:"],restartSequence:"\nHuman: ",frequencyPenalty:0,presencePenalty:.6},{id:"default-qa",title:"Q&A",responseLength:100,temperature:0,topP:1,prompt:'I am a highly intelligent question answering bot. If you ask me a question that is rooted in truth, I will give you the answer. If you ask me a question that is nonsense, trickery, or has no clear answer, I will respond with "Unknown".\n\nQ: What is human life expectancy in the United States?\nA: Human life expectancy in the United States is 78 years.\n\nQ: Who was president of the United States in 1955?\nA: Dwight D. Eisenhower was president of the United States in 1955.\n\nQ: Which party did he belong to?\nA: He belonged to the Republican Party.\n\nQ: What is the square root of banana?\nA: Unknown\n\nQ: How does a telescope work?\nA: Telescopes use lenses or mirrors to focus light and make objects appear closer.\n\nQ: Where were the 1992 Olympics held?\nA: The 1992 Olympics were held in Barcelona, Spain.\n\nQ: How many squigs are in a bonk?\nA: Unknown\n\nQ:',startSequence:"\nA:",stopSequence:"\n",restartSequence:"\n\nQ: "},{id:"default-grammar",title:"Grammatical Standard English",responseLength:60,temperature:0,prompt:"Original: She no went to the market.\nStandard American English:",stopSequence:"\n"},{id:"default-summarize",title:"Summarize for a 2nd grader",responseLength:100,temperature:.5,topP:1,frequencyPenalty:.2,prompt:'My second grader asked me what this passage means:\n"""\nJupiter is the fifth planet from the Sun and the largest in the Solar System. It is a gas giant with a mass one-thousandth that of the Sun, but two-and-a-half times that of all the other planets in the Solar System combined. Jupiter is one of the brightest objects visible to the naked eye in the night sky, and has been known to ancient civilizations since before recorded history. It is named after the Roman god Jupiter.[19] When viewed from Earth, Jupiter can be bright enough for its reflected light to cast visible shadows,[20] and is on average the third-brightest natural object in the night sky after the Moon and Venus.\n"""\nI rephrased it for him, in plain language a second grader can understand:\n"""\n',stopSequence:'"""'},{id:"default-text-to-command",title:"Text to command",responseLength:100,temperature:.5,topP:1,frequencyPenalty:.2,prompt:"Q: Ask Constance if we need some bread\nA: send-msg `find constance` Do we need some bread?\nQ: Send a message to Greg to figure out if things are ready for Wednesday.\nA: send-msg `find greg` Is everything ready for Wednesday?\nQ: Ask Ilya if we're still having our meeting this evening\nA: send-msg `find ilya` Are we still having a meeting this evening?\nQ: Contact the ski store and figure out if I can get my skis fixed before I leave on Thursday\nA: send-msg `find ski store` Would it be possible to get my skis fixed before I leave on Thursday?\nQ: Thank Nicolas for lunch\nA: send-msg `find nicolas` Thank you for lunch!\nQ: Tell Constance that I won't be home before 19:30 tonight \u2014 unmovable meeting.\nA: send-msg `find constance` I won't be home before 19:30 tonight. I have a meeting I can't move.\nQ: ",startSequence:"\nA:",stopSequence:"\n",restartSequence:"\nQ:"},{id:"default-translate",title:"English to French",responseLength:100,temperature:.5,topP:1,prompt:"English: I do not speak French.\nFrench: Je ne parle pas fran\xe7ais.\n\nEnglish: See you later!\nFrench: \xc0 tout \xe0 l'heure!\n\nEnglish: Where is a good restaurant?\nFrench: O\xf9 est un bon restaurant?\n\nEnglish: What rooms do you have available?\nFrench: Quelles chambres avez-vous de disponible?\n\nEnglish: ",startSequence:"\nFrench:",stopSequence:"\n",restartSequence:"\n\nEnglish: "},{id:"default-parse-data",title:"Parse unstructured data",responseLength:100,temperature:0,topP:1,prompt:"There are many fruits that were found on the recently discovered planet Goocrux. There are neoskizzles that grow there, which are purple and taste like candy. There are also loheckles, which are a grayish blue fruit and are very tart, a little bit like a lemon. Pounits are a bright green color and are more savory than sweet. There are also plenty of loopnovas which are a neon pink flavor and taste like cotton candy. Finally, there are fruits called glowls, which have a very sour and bitter taste which is acidic and caustic, and a pale orange tinge to them.\n\nPlease make a table summarizing the fruits from Goocrux\n| Fruit | Color | Flavor |\n| Neoskizzles | Purple | Sweet |\n| Loheckles | Grayish blue | Tart |\n",startSequence:"",stopSequence:"\n\n",restartSequence:""},{id:"default-classification",title:"Classification",responseLength:6,temperature:0,topP:1,prompt:"The following is a list of companies and the categories they fall into\n\nFacebook: Social media, Technology\nLinkedIn: Social media, Technology, Enterprise, Careers\nUber: Transportation, Technology, Marketplace\nUnilever: Conglomerate, Consumer Goods\nMcdonalds: Food, Fast Food, Logistics, Restaurants\nFedEx:",startSequence:"",stopSequence:"\n",restartSequence:"\n"},{id:"default-english-to-python",title:"Natural language to python",responseLength:300,temperature:0,topP:1,engine:"davinci-codex",prompt:'"""\n1. Create a list of first names\n2. Create a list of last names\n3. Combine them randomly into a list of 100 full names\n"""',startSequence:"",requiresCodex:!0},{id:"default-explain-code",title:"Explain code",requiresCodex:!0,loadFromExamples:!0},{id:"",title:"More examples"}],_e=n(70),Ue=n(174),We=function(){},Ke=p.a.memo((function(e){var t=e.preset,n=e.onClose,a=e.currentModel,r=Object(d.useRef)(),o="".concat(window.location.origin,"/playground/p/").concat(R(t),"?model=").concat(a),s=Object(d.useCallback)((function(e){e.target.select(),e.target.setSelectionRange(0,99999)}),[]),i=Object(d.useCallback)((function(e){r.current.select(),r.current.setSelectionRange(0,99999),document.execCommand("copy"),w.a.success("Text copied!"),Object(U.c)("Copy Preset Link")}),[]);return p.a.createElement(_e.a,{isOpen:!0,onClose:n},p.a.createElement(_e.e,null,"Share preset"),p.a.createElement(_e.b,null,p.a.createElement("p",null,"Anyone who has this link and an OpenAI account will be able to view this."),p.a.createElement("div",{className:"flex items-stretch mt-6"},p.a.createElement(Ue.a,{size:"small",fullWidth:!0,value:o,onChange:We,onFocus:s,ref:r}),p.a.createElement(O.a,{className:"ml-2 items-center",startIcon:y.l,"aria-label":"Copy",onClick:i}))),p.a.createElement(_e.d,null,p.a.createElement(_e.c,{color:"neutral",onClick:n},"Close")))})),Ge=n(62),Be={menu:function(e){return Object(a.a)(Object(a.a)({},e),{},{zIndex:"3"})},option:function(e,t){var n=t.data,r=Object(a.a)(Object(a.a)({},e),{},{fontWeight:400});return"More examples"===n.title&&(r.color="var(--primary)"),r}},ze=function(e){return e.id},He=function(e){return e.title},Ve=p.a.memo((function(e){var t=e.presetList,n=e.currentPreset,a=e.activePresetId,r=e.onChange,s=Object(Ge.b)().hasCodexAccess,i=Object(d.useMemo)((function(){return Re.filter((function(e){return!(e.requiresCodex&&!s)}))}),[s]),l=Object(d.useMemo)((function(){var e=t.concat(i),a=[{label:"My presets",options:t},{label:"Examples",options:i}];return n&&!e.find((function(e){return e.id===n.id}))&&(e.unshift(n),a.unshift({label:"Currently viewing",options:[n]})),[a,e]}),[t,n,i]),c=Object(o.a)(l,2),u=c[0],h=c[1],m=Object(d.useMemo)((function(){return a&&a?h.find((function(e){return e.id===a})):null}),[h,a]);return p.a.createElement(J.b,{options:u,value:m,styles:Be,onChange:r,isClearable:!0,placeholder:"Load a preset...",getOptionValue:ze,getOptionLabel:He,height:32})})),Qe=n(27),Je=n(32);function Ye(e){var t=e.children,n=e.label;return p.a.createElement("div",{className:"body-small mb-2 flex items-center"},p.a.createElement("div",{className:"bold mr-2"},t),n&&p.a.createElement("div",{style:{color:"var(--gray-600)"}},n))}var $e=Je.a.div(Le||(Le=Object(Qe.a)(["\n    margin-top: 16px;\n"]))),Xe=p.a.memo((function(e){var t=e.currentPreset,n=e.onSave,a=e.onCancel,r=e.savingForShare,s=t&&t.isOwner,i=Object(d.useMemo)((function(){return t?t.isOwner?t.title:Ze(t.title):""}),[t]),l=Object(d.useState)(i),c=Object(o.a)(l,2),u=c[0],h=c[1],m=Object(d.useState)(t&&t.description||""),g=Object(o.a)(m,2),f=g[0],b=g[1],v=Object(d.useCallback)((function(e){return!!e.trim().length||(w.a.danger("You must enter a title for this preset"),!1)}),[]),y=Object(d.useCallback)((function(e){h(e.target.value)}),[]),E=Object(d.useCallback)((function(e){b(e.target.value)}),[]),S=Object(d.useCallback)((function(e){v(u)&&(Object(U.c)("Save Existing Preset"),n(u,f,!1))}),[u,f,n,v]),C=Object(d.useCallback)((function(e){var a=u;t&&t.title===a&&(a=Ze(a)),v(a)&&(Object(U.c)("Create New Preset",{fromPrevious:t?t.id:void 0}),n(a,f,!0))}),[u,f,n,v,t]),k=Object(d.useCallback)((function(e){a()}),[a]);return p.a.createElement(_e.a,{isOpen:!0,onClose:k},p.a.createElement("form",{onSubmit:s?S:C},p.a.createElement(_e.e,null,r?"Save before sharing":s?'Update "'.concat(t.title,'"'):"Save preset"),p.a.createElement(_e.b,null,p.a.createElement("p",null,"This will save the current playground state as a preset which you can access later or share with others."),p.a.createElement($e,null,p.a.createElement(Ye,null,"Name"),p.a.createElement(Ue.a,{size:"small",fullWidth:!0,value:u,onChange:y,maxLength:128,autoFocus:!0})),p.a.createElement($e,null,p.a.createElement(Ye,{label:"Optional"},"Description"),p.a.createElement(Ue.a,{size:"small",fullWidth:!0,value:f,onChange:E,maxLength:2048}))),p.a.createElement(_e.d,null,p.a.createElement(_e.c,{color:"neutral",onClick:k},"Cancel"),s?p.a.createElement(p.a.Fragment,null,p.a.createElement(_e.c,{color:"neutral",onClick:C},"Save as new"),p.a.createElement(_e.c,{type:"submit",onClick:S},"Update")):p.a.createElement(_e.c,{type:"submit",onClick:C},"Save"))))}));function Ze(e){var t=!1,n=e.replace(/\(Copy\s*(\d+)?\)\s*$/,(function(e,n){return t=!0,"number"===typeof n?"(Copy ".concat(parseInt(n)+1,")"):"(Copy 2)"}));return t?n:"".concat(n.trim()," (Copy)")}var et=n(527),tt=n(5),nt=p.a.memo((function(e){var t=e.onClose;return p.a.createElement("div",{className:"pg-welcome body-small"},p.a.createElement("h3",null,"Get started"),p.a.createElement("p",null,"Enter some text or select a preset, and watch the API respond with a"," ",p.a.createElement("a",{href:"/docs/guides/completion",target:"_blank"},"completion")," ","that attempts to match the context or pattern you provided."),p.a.createElement("p",null,"You can control which"," ",p.a.createElement("a",{href:"/docs/engines",target:"_blank"},"model")," ","completes your request by changing the engine."),p.a.createElement("div",{className:"subheading"},"Keep in mind"),p.a.createElement(et.a,{icon:y.r},"Use good judgment when sharing outputs, and attribute them to your name or company."," ",p.a.createElement("a",{href:"".concat(tt.f,"/sharing-publication"),target:"_blank",rel:"noreferrer"},"Learn more"),"."),p.a.createElement(et.a,{icon:y.a},"Requests submitted to our models may be used to train and improve future models."," ",p.a.createElement("a",{href:"https://help.openai.com/en/articles/5722486",target:"_blank",rel:"noreferrer"},"Learn more"),"."),p.a.createElement(et.a,{icon:y.f},"Most models' training data cuts off in October 2019, so they may not have knowledge of current events."),p.a.createElement(O.a,{className:"pg-welcome-close",size:"small",color:O.b.neutral,variant:O.c.minimal,"aria-label":"Close",onClick:t},p.a.createElement(H.c,{size:"20px"})))})),at=n(135),rt=n(138),ot=n.n(rt),st=n(177),it=n(499),lt=n(179),ct=n(497),ut=(n(719),!1);function dt(e){var t=e.text,a=e.engine,r=e.bestOf,s=e.responseLength,i=e.subscription,l=Object(d.useState)(null),c=Object(o.a)(l,2),u=c[0],m=c[1],g=Object(d.useState)(!0),f=Object(o.a)(g,2),b=f[0],v=f[1],E=Object(d.useState)(0),S=Object(o.a)(E,2),C=S[0],k=S[1],P=Object(it.a)(),w=Object(I.b)(a),O=Object(d.useMemo)((function(){return ot()((function(e,t){var n=e.encode(t||"").bpe;k(n.length),v(!1)}),1e3)}),[]);Object(d.useEffect)((function(){!ut&&t&&(ut=!0,P((function(){n.e(3).then(n.bind(null,601)).then((function(e){m(e)})).catch((function(e){console.error(e),m(!1)}))}),1e3))}),[t,P]);var j=Object(d.useMemo)((function(){return Object(I.d)(a)?"codex":"gpt3"}),[a]),T=Object(d.useMemo)((function(){var e=null===u||void 0===u?void 0:u.default;return e?new e({type:j}):null}),[u,j]);Object(d.useEffect)((function(){T&&(v(!0),O(T,t||""))}),[O,T,t]);var F=Object(d.useMemo)((function(){var e,t=C+s>w;if(/\bdavinci\b/.test(a))e=1;else if(/\bcurie\b/.test(a))e=10;else if(/\bbabbage\b/.test(a))e=50;else{if(!/\bada\b/.test(a))return{cost:null,isTooLong:t};e=75}var n=(C+(r||1)*s)/e,o=.06*n/1e3;return{cost:o,normalizedTokens:n,isTooLong:t,isExpensive:o>=.3}}),[C,r,s,a,w]),q=Object(d.useCallback)((function(){var e,t=F.cost,n=F.normalizedTokens;e=0===t?null:t<1e-4?"<$0.0001":t<1?"$".concat(String(Number(t.toPrecision(2)))):Object(st.c)(t);var r=[p.a.createElement("p",{key:"count"},p.a.createElement("strong",null,Object(st.a)(C))," token",1===C?"":"s"," in prompt"),p.a.createElement("p",{key:"resp"},"Up to ",Object(st.a)(s)," token",1===s?"":"s"," ","in response")];if(F.isTooLong)r.push(p.a.createElement("p",{key:"too-many",className:"pg-too-many-tokens"},"This engine can only process a maximum of ",Object(st.a)(w)," ","tokens in a single request, please reduce your prompt or response length."));else if(t)if(i&&Object(ct.g)(i.plan)){var o=a.indexOf("davinci")>=0?"":"davinci-equivalent ";r.push(p.a.createElement("p",{key:"trial"},"Submitting would use up to"," ",p.a.createElement("a",{href:tt.g,target:"_blank",rel:"noopener noreferrer"},Object(st.a)(n)," ",o,"tokens")))}else r.push(p.a.createElement("p",{key:"cost"},"Submitting would cost up to"," ",p.a.createElement("a",{href:tt.g,target:"_blank",rel:"noopener noreferrer"},e)));return p.a.createElement("div",{className:"pg-token-tooltip"},r)}),[C,s,F,i,a,w]);return!1!==T&&p.a.createElement(x.a,{content:q,interactive:!0,autoFocus:!1},p.a.createElement("div",{className:Object(h.a)("pg-token-counter",T&&"visible",b&&"pending",F.isExpensive&&"warn",F.isTooLong&&"error")},b?p.a.createElement(lt.a,null):F.isExpensive||F.isTooLong?p.a.createElement(y.b,null):null,p.a.createElement("div",{className:"pg-token-count"},Object(st.a)(C))))}var pt,ht=p.a.memo(dt),mt=Je.a.div(pt||(pt=Object(Qe.a)(["\n    a {\n        color: var(--primary);\n    }\n    li {\n        line-height: 1.4;\n    }\n    li svg {\n        vertical-align: text-top;\n    }\n    li + li {\n        margin-top: 5px;\n    }\n"]))),gt={verticalAlign:"text-top",margin:"1px 5px 0 0",color:"var(--gray-800)"},ft=p.a.memo((function(e){var t=e.onAccept;return p.a.createElement(_e.a,{closeable:!1,isOpen:!0},p.a.createElement(_e.e,null,p.a.createElement(y.c,{style:gt})," Content warning"),p.a.createElement(_e.b,null,p.a.createElement(mt,null,p.a.createElement("p",null,"Our system has flagged that the generated content may contain unsafe or sensitive content."),p.a.createElement("p",null,"We are actively working on improving our"," ",p.a.createElement("a",{href:"/docs/engines/content-filter",target:"_blank",rel:"noopener noreferrer"},"content filter")," ","in order to enable suppression of these outputs, and as a beta customer we consider you a partner in this effort \u2013 here's how you can help:"),p.a.createElement("ul",null,p.a.createElement("li",null,"We kindly ask that you refrain from sharing unsafe outputs on social media. For more details, please refer to our"," ",p.a.createElement("a",{href:"".concat(tt.f,"/sharing-publication"),target:"_blank",rel:"noopener noreferrer"},"social media policies"),"."),p.a.createElement("li",null,"Avoid prompts that produce toxic outputs, as they will not pass our"," ",p.a.createElement("a",{href:"/docs/going-live",target:"_blank",rel:"noopener noreferrer"},"pre-launch review"),".")))),p.a.createElement(_e.d,{shrinkMargin:!0},p.a.createElement(_e.c,{onClick:t},"I Understand")))})),bt=n(178),vt=n(47),yt=(n(720),{danger:vt.e,warn:vt.e,note:bt.a});function Et(e){var t=e.actions,n=e.className,a=e.icon,r=e.type,s=void 0===r?"danger":r,i=e.children,l=e.onDismiss,c=e.dismissableId,u=a||yt[s],m="oai/playground/da/".concat(c),g=Object(d.useState)(!!c&&A.a.getItem(m)),f=Object(o.a)(g,2),b=f[0],v=f[1],E=Object(d.useCallback)((function(){l&&l(),c&&(A.a.setItem(m,!0),v(!0))}),[l,c,m]);return b?null:p.a.createElement("div",{className:Object(h.a)("pg-alert",s,n),"data-testid":"pg-alert"},p.a.createElement("div",{className:"pg-alert-body"},u&&p.a.createElement("span",{className:"pg-alert-icon pg-alert-color"},p.a.createElement(u,null)),p.a.createElement("div",{className:"pg-alert-message"},i)),t&&p.a.createElement("div",{className:"pg-alert-actions"},t),(l||c)&&p.a.createElement("div",{className:"pg-alert-dismiss",role:"button",onClick:E},p.a.createElement(y.u,null)))}function St(e){var t=e.defaultExpanded,n=e.localStorageKey,a=e.title,r=e.children,s=n?A.a.getItem(n):void 0,i=Object(d.useState)(void 0!==t?t:!s),l=Object(o.a)(i,2),c=l[0],u=l[1];return Object(d.useEffect)((function(){n&&A.a.setItem(n,!0)}),[n]),p.a.createElement("div",{className:"pg-alert-exp"},p.a.createElement("div",{className:"pg-alert-exp-title",onClick:function(){u(!c)}},p.a.createElement("span",null,a),c?p.a.createElement(H.b,null):p.a.createElement(H.a,null)),p.a.createElement("div",{className:"pg-alert-exp-body "+(c?"expanded":"")},r))}var Ct=function(){return p.a.createElement(Et,{type:"danger"},p.a.createElement(St,{title:"Prompt contains high-risk words",localStorageKey:"oai/seenExpandedWarning"},p.a.createElement("p",null,"As part of our mission to develop AI in a responsible way, we\u2019re starting to block prompts in Playground that have a high risk of producing unsafe content. We recommend taking"," ",p.a.createElement("a",{target:"_blank",href:"/docs/safety-best-practices/6-filter-sensitive-and-unsafe-content"},"similar steps")," ","to filter content in your application."),p.a.createElement("p",null,"If your use case requires the ability to use these words, reach out to"," ",p.a.createElement("a",{href:"mailto:support@openai.com"},"support@openai.com"),".")))},kt=(n(721),function(e){var t=e.onClickShowContentFilterPrefs,n=e.onDismiss,a=e.contentFilterLabel;return p.a.createElement(Et,{className:"pg-cf-alert",type:a===je?"warn":"danger",onDismiss:n},p.a.createElement(St,{localStorageKey:"oai/playground/contentFilterSeen",title:a===je?"Completion may contain sensitive content":"Completion may contain unsafe content"},"Consider"," ",p.a.createElement("a",{target:"_blank",href:"/docs/safety-best-practices/7-keep-your-application-on-topic"},"adjusting your prompt")," ","to keep completions appropriate. To turn off content warnings,"," ",p.a.createElement("span",{className:"pg-cf-fake-link",role:"button",tabIndex:0,onClick:t},"update your preferences"),"."))}),Pt=(n(722),p.a.memo((function(e){var t=e.onClose,n=e.onChange,r=e.value,o=Object(d.useCallback)((function(e){var t=e?"enabled":"disabled";w.a.success("Sensitive completion warnings ".concat(t)),n(Object(a.a)(Object(a.a)({},r),{},{sensitive:e})),Object(U.c)("Playground CF Sensitive Warning ".concat(Object(K.capitalize)(t)))}),[n,r]),s=Object(d.useCallback)((function(e){var t=e?"enabled":"disabled";w.a.success("Unsafe completion warnings ".concat(t)),n(Object(a.a)(Object(a.a)({},r),{},{unsafe:e})),Object(U.c)("Playground CF Unsafe Warning ".concat(Object(K.capitalize)(t)))}),[n,r]);return p.a.createElement(_e.a,{isOpen:!0,closeable:!0,onClose:t},p.a.createElement(_e.e,null,"Content filter preferences"),p.a.createElement(_e.b,null,p.a.createElement("p",null,"The content filter detects when text may contain sensitive or unsafe content. It's automatically enabled for completions in Playground and free to use in your API integration."," ",p.a.createElement("a",{href:"/docs/engines/content-filter",target:"_blank",rel:"noopener noreferrer"},"Learn more.")),p.a.createElement("div",{className:"pg-cfp-form"},p.a.createElement("div",{className:"pg-cfp-form-title subheading"},"Playground warnings"),p.a.createElement(re.a,{asToggle:!0,className:"mt-4",checked:!r||void 0===r.sensitive||r.sensitive,onChange:o,label:p.a.createElement("div",{className:"pg-cfp-cb"},p.a.createElement("div",{className:"pg-cfp-cb-label body-small bold"},"Sensitive completions"),p.a.createElement("div",{className:"pg-cfp-cb-desc body-small"},"Completions that may include topics such as politics, religion, or protected classes like race or nationality"))}),p.a.createElement(re.a,{asToggle:!0,className:"mt-4",checked:!r||void 0===r.unsafe||r.unsafe,onChange:s,label:p.a.createElement("div",{className:"pg-cfp-cb"},p.a.createElement("div",{className:"pg-cfp-cb-label body-small bold"},"Unsafe completions"),p.a.createElement("div",{className:"pg-cfp-cb-desc body-small"},"Completions that may contain profane, hateful, or NSFW content"))}))),p.a.createElement(_e.d,{shrinkMargin:!0},p.a.createElement(_e.c,{color:O.b.neutral,onClick:t},"Close")))}))),wt=n(723),Ot=n.n(wt),jt=n(724),xt=n.n(jt),Tt=n(727),Ft=(n(728),n(729),n(730),n(731),n(732),n(733),n(734),n(735),n(736),n(737),n(122)),qt=(n(738),n(739),Object(d.forwardRef)((function(e,t){var n=e.initialText,a=e.language,r=e.onKeyDown,o=e.onTextChange,s=Object(d.useRef)(n||""),i=Object(Ft.a)(),l=Object(d.useRef)(null),c=Object(d.useRef)(null),u=Object(d.useCallback)((function(e){return(a&&"plaintext"!==a?Object(Tt.highlight)(e,Tt.languages[a]):xt()(e)).split("\n").map((function(e,t){return"<span class='editor-line-number'>".concat(t+1,"</span>").concat(e)})).join("\n")}),[a]),h=Object(d.useCallback)((function(e){e!==s.current&&(s.current=e,i())}),[i]),m=Object(d.useCallback)((function(e){h(e),o&&o()}),[o,h]);return Object(d.useEffect)((function(){if(c.current){c.current=!1;var e=l.current;e&&e.scrollHeight>e.clientHeight&&(e.scrollTop=e.scrollHeight)}})),Object(d.useImperativeHandle)(t,(function(){return{getText:function(){return s.current},pushTokens:function(e,t){var n=e.map((function(e){return e.text})).join("");h(t?n:s.current+n),c.current=!0},hijackInitialState:function(e){h(e)},injectText:function(e){var t=s.current+e;return h(t),t},highlightLastCompletion:function(){}}})),p.a.createElement("div",{className:"pg-code-editor-wrapper",ref:l},p.a.createElement(Ot.a,{textareaId:"pg-code-editor-textarea",className:"pg-code-editor",value:s.current,onValueChange:m,highlight:u,padding:10,tabSize:4,onKeyDown:r}))}))),Mt=[{value:"plaintext",label:"Plain text"},{value:"bash",label:"Bash"},{value:"csharp",label:"C#"},{value:"go",label:"Go"},{value:"java",label:"Java"},{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"ruby",label:"Ruby"},{value:"rust",label:"Rust"},{value:"sql",label:"SQL"},{value:"typescript",label:"Typescript"}],Lt=p.a.memo((function(e){var t=e.onChange,n=e.language,r=Object(d.useState)(!1),s=Object(o.a)(r,2),i=s[0],l=s[1],c=Object(d.useState)(!1),u=Object(o.a)(c,2),h=u[0],m=u[1],g=Object(d.useCallback)((function(){l(!0)}),[]),f=Object(d.useCallback)((function(){l(!1)}),[]),b=Object(d.useCallback)((function(){m(!0),l(!1)}),[]),v=Object(d.useCallback)((function(){m(!1),l(!1)}),[]),y=Object(d.useRef)(!1),E=Object(d.useMemo)((function(){return{container:function(e,t){return y.current=t.isFocused,Object(a.a)(Object(a.a)({},e),{},{display:"inline-block"})},control:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{border:"none"})},placeholder:function(e,t){return Object(a.a)(Object(a.a)({},e),y.current&&t.value?{}:{position:"static",top:"auto",transform:"none"})},input:function(e,t){return Object(a.a)(Object(a.a)({},e),y.current&&t.value?{}:{position:"absolute",top:"50%",transform:"translateY(-50%)"})},menu:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{minWidth:"100px"})},menuList:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{maxHeight:"350px"})},singleValue:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{maxWidth:"none"},y.current&&t.value?{}:{position:"static",top:"auto",transform:"none"})},valueContainer:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{padding:"2px 0 0 0",fontSize:"15px"})},dropdownIndicator:function(e,t){return Object(a.a)(Object(a.a)({},e),{},{color:"var(--gray-300)"})}}}),[]),S=Object(d.useMemo)((function(){return(n?Mt.find((function(e){return e.value===n})):null)||Mt[0]}),[n]);return p.a.createElement(x.a,{isOpen:i&&!h,content:"Syntax highlighting",placement:"top",onMouseEnter:g,onMouseLeave:f,showArrow:!1},p.a.createElement("div",{className:"pg-language-syntax-select"},p.a.createElement(J.b,{options:Mt,onMenuOpen:b,onMenuClose:v,isClearable:!1,isSearchable:!0,menuPlacement:"top",styles:E,onChange:t,value:S})))})),It=[/\bnigger\w*/i,/\bfaggot\w*/i,/\bkike\w*/i,/\bdykes?\b/i,/\bwetbacks?\b/i,/\bchinks?\b/i,/\bgooks?\b/i,/\bpakis?\b/i,/\binjuns?\b/i,/\btrannys?\b/i,/\btrannies\b/i,/\bspicks?\b/i,/\bshemales?\b/i],Nt=(n(740),n(741),["ada-instruct-beta","babbage-instruct-beta","curie-instruct-beta","curie-instruct-beta-v2","davinci-instruct-beta","davinci-instruct-beta-v3"]),At=["cushman-codex","davinci-codex"],Dt=["content-filter-alpha"],Rt=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).cookies=new f.a,a.savingForShare=!1,a.truncateGeneratedIndices=function(e){for(var t=a.state.cleanGeneratedIndices,n={},r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];s<e&&(t[s]>e?n[s]=e-1:n[s]=t[s])}a.setState({cleanGeneratedIndices:n})},a.toggleRightPanelMobile=function(){var e=a.state.rightPanelVisibleMobile;a.setState({rightPanelVisibleMobile:!e}),e||Object(U.c)("Playground Open Mobile Param Panel")},a.handleCloseWelcome=function(){a.setState({showWelcomeInfo:!1}),A.a.setItem("oai/playground/hasSeenWelcome",!0)},a.onModelParamChange=function(e,t,n){"engine"===e&&(a.previousEditorText=a.getEditorText(),Object(I.d)(t)!==Object(I.d)(n)&&a.setModelParameter("temperature",a.getDefaultTemperature(t))),a.setIsChanged()},a.updateProbsType=function(e){Object(U.c)("Playground Change Logprobs Type",{type:e}),a.setState({probsType:e}),e?a.setCookie("probsType",e):a.unsetCookie("probsType")},a.updateStop=function(e){Object(U.c)("Playground Change Stop Sequence"),a.setState({stopSequence:e}),a.setIsChanged()},a.updateStart=function(e){a.setState({startSequence:e.target.value}),a.setIsChanged()},a.updateStartEnabled=function(e){a.setState({startSequenceEnabled:e})},a.updateRestart=function(e){a.setState({restartSequence:e.target.value}),a.setIsChanged()},a.updateRestartEnabled=function(e){a.setState({restartSequenceEnabled:e})},a.updateCodeLanguage=function(e){a.setState({codeLanguage:(e||{}).value})},a.isCodeEditor=function(){return Object(I.d)(a.state.modelParameters.engine.value)},a.finishedSampling=function(e){var t=a.getEditor();if(t.switchModeToGenerating&&t.switchModeToGenerating(!1),a.state.restartSequence&&a.state.restartSequenceEnabled&&t.injectText(a.state.restartSequence.replace(/\u21b5/g,"\n")),e){var n=v.a.parse(a.props.location.search).contentFilterModel;C.a.runContentFilter(e,n).then((function(e){if(!a.isUnmounted){var n={contentFilterLabel:e.warn,contentFilterScore:e.toxicity_score,contentFilterModel:e.toxicity_model};Object(U.c)("Playground Toxicity Result",{result:n.contentFilterLabel,model:n.contentFilterModel}),(e.warn===xe&&!1!==a.state.contentFilterPrefs.unsafe||e.warn===je&&!1!==a.state.contentFilterPrefs.sensitive)&&(t.highlightLastCompletion(e.warn),n.showContentFilterOverlay=null==A.a.getItem("oai/playground/hasSeenToxicityOverlay"),setTimeout((function(){a.setState({showContentFilterAlert:!0})}),100)),a.setState(n)}}))}},a.handleGenerateClick=function(){a.requestCompletion()},a.checkForRestrictedTerms=function(e){var t,n=Object(s.a)(It);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.test(e))return[a]}}catch(r){n.e(r)}finally{n.f()}return[]},a.requestCompletion=function(){if(a.state.requestPending)a.abortCompletion();else{var e=a.getEditorText(),t=a.checkForRestrictedTerms(e),n=Object(o.a)(t,1)[0];if(!a.state.allowRestrictedWords&&n)return a.setState({showRestrictedTermsAlert:!0}),void Object(U.c)("Playground Restricted Term",{restrictedTermA:String(n)});a.setState({showRestrictedTermsAlert:!1});var s=a.state.modelParameters.engine.value;Object(U.c)("Playground Submit",{preset:a.state.currentPreset?a.state.currentPreset.id:void 0,model:s,temperature:a.state.modelParameters.temperature.value,responseLength:a.state.modelParameters.responseLength.value,topP:a.state.modelParameters.topP.value,frequencyPenalty:a.state.modelParameters.frequencyPenalty.value,presencePenalty:a.state.modelParameters.presencePenalty.value,logprobs:a.state.probsType});var i={requestPending:!0,lastGeneration:null,lastPrompt:e,lastGenerationModel:s};e.endsWith(" ")?(Object(U.c)("Playground Warn Trailing Space"),i.alertMessage=p.a.createElement("p",null,"Warning: Your text ends in a trailing space, which causes worse performance due to how the API splits text into tokens."),i.alertType="warn"):a.state.alertMessage&&!a.state.perpetuateWarning&&(i.alertMessage=null,i.alertType=null),a.state.contentFilterLabel&&(i.showContentFilterAlert=!1,i.showContentFilterOverlay=!1,i.contentFilterLabel="",i.contentFilterScore="",i.contentFilterModel=""),a.state.showFeedbackButtons&&(i.showFeedbackButtons=!1,i.selectedFeedback=void 0),a.setState(i),a.state.startSequence&&a.state.startSequenceEnabled&&(e=a.getEditor().injectText(a.state.startSequence.replace(/\u21b5/g,"\n")));var l=a.state.stopSequence.map((function(e){return e.replace(/\u21b5/g,"\n")})),c=a.state.probsType,u=0,d="",h=!0,m=e.length,f=a.makeRequest(e,a.state.probsType?20:0,l,(function(e,t){if(null===e)return a.state.cleanGeneratedIndices[m]=a.getEditorText().length,a.finishedSampling(d),Object(U.c)("Playground Completion",{type:"success",result:"finished"}),void a.setState({requestPending:!1,lastGeneration:d,showFeedbackButtons:!0,selectedFeedback:void 0});if(t||!e.choices){var n=function(e){if(429===(null===e||void 0===e?void 0:e.status))return"requests"===e.type||"tokens"===e.type?{errorMessage:e.message,loggingDesc:"reached rate limit"}:{errorMessage:p.a.createElement("p",null,"You've reached your usage limit. See your"," ",p.a.createElement(g.a,{to:"/account",target:"_blank"},"usage dashboard")," ","and"," ",p.a.createElement(g.a,{to:"/account/billing",target:"_blank"},"billing settings")," ","for more details. If you have further questions, reach out to support@openai.com."),loggingDesc:"reached billing limit"};var t=(null===e||void 0===e?void 0:e.message)||"An unknown error occurred, please report this issue if it persists";return[[/is not valid under any of the given schemas - 'stop'/,"The API rejected your stop sequences. You may specify up to four stop sequences per request."]].forEach((function(e){var n=Object(o.a)(e,2),a=n[0],r=n[1];a.test(t)&&(t=r)})),{errorMessage:t,loggingDesc:t}}(t),s=n.errorMessage,i=n.loggingDesc;return a.setState({requestPending:!1,alertMessage:s}),void Object(U.c)("Playground Completion",{type:"error",error:i})}for(var l=e.choices[0],f=l.logprobs,b=f.tokens,v=f.token_logprobs,y=f.top_logprobs,E=f.text_offset,S=Object(r.a)(l.text),C=[],k=!1,P=0,w=0;w<b.length;){var O=E[w],j=a.getGenerationEnd(u);j?(k=!0,P=j):k&&u>=P&&(k=!1);var x={isPrompt:u<m&&!k,isLatestCompletion:u>=m};for(null!=c&&(x.tokens=[],x.logits=[]),C.push(x);E[w]===O;)null!=c&&(x.tokens.push(b[w]),x.logits.push(y[w]),v&&null!==v[w]&&(x.logprob=(x.logprob||0)+v[w])),w++;x.text=S.slice(O-E[0],void 0!==E[w]?E[w]-E[0]:void 0).join(""),x.isLatestCompletion&&(d+=x.text),u+=x.text.length}h&&l.finish_reason&&""===d.trim()&&(Object(U.c)("Playground Empty Completion"),"stop"===l.finish_reason&&a.setState({alertMessage:p.a.createElement("p",null,"The model predicted a completion that begins with a stop sequence, resulting in no output. Consider adjusting your prompt or stop sequences."),alertType:"warn"})),a.getEditor().pushTokens(C,h),h=!1,a.state.lastGenerationId!==e.id&&a.setState({lastGenerationId:e.id})}),a.state.overrideHost);a.setState({requestAborter:f})}},a.onTextChange=function(){a.state.showContentFilterAlert&&(a.setState({showContentFilterAlert:!1}),a.getEditor().highlightLastCompletion(null)),a.setIsChanged(),a.state.showFeedbackButtons&&a.setState({showFeedbackButtons:!1}),a.state.requestPending||a.forceUpdate()},a.onKeyDown=function(e){return"Enter"===e.key&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),a.state.requestPending?void a.abortCompletion():void(e.shiftKey?!a.state.requestPending&&a.state.lastPrompt&&(Object(U.c)("Playground Regenerate",{clicked:!1}),a.regenerateLast()):a.requestCompletion())):"s"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),a.state.isChanged)?(Object(U.c)("Save Preset",{clicked:!1}),void a.setState({showSaveModal:!0})):"u"===e.key.toLowerCase()&&(e.ctrlKey||e.metaKey)&&e.shiftKey?(e.preventDefault(),void(!a.state.requestPending&&a.state.lastPrompt&&(Object(U.c)("Playground Undo",{clicked:!1}),a.undoLastGeneration()))):("ArrowUp"===e.key&&e.ctrlKey&&e.shiftKey&&(e.preventDefault(),a.handleFeedback("thumbsUp")),"ArrowDown"===e.key&&e.ctrlKey&&e.shiftKey&&(e.preventDefault(),a.handleFeedback("thumbsDown")),"Escape"===e.key&&a.state.requestPending?(e.preventDefault(),void a.abortCompletion()):void 0)},a.onEditorKeyUp=function(e){a.state.alertMessage&&e.keyCode>=65&&e.keyCode<=90&&!a.state.perpetuateWarning&&a.setState({alertMessage:null})},a.handlePresetSelect=function(e){if(e){if("More examples"===e.title)return void window.open("/examples");if(a.state.isChanged&&!1===window.confirm("Changing presets will discard any unsaved changes, do you want to continue?"))return;var t=a.props.match.params.presetId,n=R(e);if(n===t){if(!a.state.isChanged)return;a.applyPresetState(a.state.currentPreset)}else Object(U.c)("Select Preset",{preset:n}),L.a.replace({pathname:"/playground/p/".concat(n)})}else L.a.replace({pathname:"/playground"});w.a.success("Settings updated!",{duration:4,hasCloseButton:!1})},a.handleFeedback=function(e){var t={model:a.state.lastGenerationModel,completionID:a.state.lastGenerationId};a.state.selectedFeedback===e?(a.setState({selectedFeedback:void 0}),t.rating="unset".concat(Object(K.capitalize)(e))):(a.setState({selectedFeedback:e}),t.rating=e,w.a.info("Thanks! Your feedback helps improve our models.",{duration:4,hasCloseButton:!0})),Object(U.c)("Playground Feedback Rating",t)},a.handleSaveClick=function(){a.setState({showSaveModal:!0})},a.handleSaveModalSubmit=function(e,t,n){a.setState({showSaveModal:!1});var r=a.savingForShare,o=function(){a.fetchPresetList(),r&&a.setState({showShareModal:!0})};n?a.createPreset(e,t).then(o):a.savePreset(e,t).then(o),a.savingForShare=!1},a.handleSaveModalCancel=function(){a.setState({showSaveModal:!1}),a.savingForShare=!1},a.handleDeleteClick=function(){a.closeActionMenu();var e=a.state.currentPreset;if(e&&e.isOwner){var t=e.title||"Unnamed";k.a.create({title:'Delete preset "'.concat(t,'"?'),size:"small",footerProps:{shrinkMargin:!0},body:"This preset will no longer be accessible by you or others you've shared it with.",actions:[{label:"Cancel"},{label:"Delete",color:O.b.negative,onClick:function(t){t(),a.deletePreset(e)}}]})}else a.props.match.params.presetId?L.a.replace({pathname:"/playground"}):(Object(U.c)("Playground Clear Settings"),a.applyPresetState(null))},a.handleShareClick=function(){var e=a.state.currentPreset,t=e&&e.isOwner;Object(U.c)("Playground Share Click"),!e||a.state.isChanged?e&&t?k.a.create({title:"Save before sharing?",body:"Your preset has unsaved changes, do you want to save before sharing this preset?",actions:[{label:"Cancel"},{label:"Don't Save",onClick:function(e){e(),a.setState({showShareModal:!0})}},{label:"Save",color:O.b.primary,onClick:function(e){e(),a.savePreset(),a.setState({showShareModal:!0})}}]}):(a.savingForShare=!0,a.setState({showSaveModal:!0})):a.setState({showShareModal:!0})},a.handleShareModalClose=function(){a.setState({showShareModal:!1})},a.handleCodeExportClick=function(){Object(U.c)("Playground Export"),a.setState({showCodeModal:!0})},a.handleCodeModalClose=function(){a.setState({showCodeModal:!1})},a.handleContentFilterPrefsModalShow=function(){a.closeActionMenu(),a.setState({showContentFilterPrefsModal:!0})},a.handleContentFilterPrefsModalClose=function(){a.setState({showContentFilterPrefsModal:!1})},a.handleContentFilterPrefsChange=function(e){a.setState({contentFilterPrefs:e}),A.a.setItem("oai/playground/contentFilterPrefs",e)},a.handleHideContentFilterWarningOverlay=function(){a.setState({showContentFilterOverlay:!1}),A.a.setItem("oai/playground/hasSeenToxicityOverlay",1)},a.handleHideContentFilterAlert=function(){a.setState({showContentFilterAlert:!1}),a.getEditor().highlightLastCompletion(null)},a.handleUndoClick=function(){Object(U.c)("Playground Undo",{clicked:!0}),a.undoLastGeneration()},a.handleRegenerateClick=function(){Object(U.c)("Playground Regenerate",{clicked:!0}),a.regenerateLast()},a.renderActionMenu=function(e){var t=e.close;a.closeActionMenu.closeFn=t;var n=a.state,r=n.currentPreset,o=n.isLoadingPreset,s=!r&&!o||r&&r.isOwner,i=!!r&&!s;return p.a.createElement(j.a,{className:"pg-action-menu"},p.a.createElement(j.b,{className:"pg-action-delete-preset",disabled:i,onClick:a.handleDeleteClick},"Delete preset"),p.a.createElement(j.c,null),p.a.createElement(j.b,{onClick:a.handleContentFilterPrefsModalShow},"Content filter preferences"))},a.onNavigate=function(e){return!!e.pathname.startsWith("/playground")||"Leaving Playground will discard any unsaved prompts or settings, do you want to continue?"},a.state={editors:[],cleanGeneratedIndices:{},requestPending:!1,modelParameters:P.a.create(a.getDefaultModelParameters()),presetList:[],currentPreset:null,isLoadingPreset:!1,isLoadingPresetList:!1,isChanged:!1,isSaving:!1,isDeleting:!1,showSaveModal:!1,showShareModal:!1,showCodeModal:!1,examplePreset:!1,rightPanelVisibleMobile:!1,probsType:a.getCookie("probsType",null),overrideHost:void 0,stopSequence:[],startSequence:"",startSequenceEnabled:!0,restartSequence:"",restartSequenceEnabled:!0,alertMessage:null,alertType:null,contentFilterLabel:"",contentFilterModel:"",contentFilterScore:"",contentFilterPrefs:A.a.getItem("oai/playground/contentFilterPrefs")||{},showWelcomeInfo:null===A.a.getItem("oai/playground/hasSeenWelcome"),showContentFilterAlert:!1,showContentFilterOverlay:!1,showContentFilterPrefsModal:!1,showRestrictedTermsAlert:!1,requestAborter:void 0,lastPrompt:"",lastGeneration:"",lastGenerationModel:"",allowRestrictedWords:!1,codeLanguage:"",selectedFeedback:void 0,showFeedbackButtons:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.presetId;e&&this.fetchPreset(e),this.fetchPresetList(),this.fetchFeatureFlags(),this.loadInitialQueryParams(),Object(N.a)("Playground"),Object(U.c)("View Page",{page:"Playground"}),document.body.classList.add("app-wrapper-max-height"),document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){this.isUnmounted=!0,document.body.classList.remove("app-wrapper-max-height"),document.removeEventListener("keydown",this.onKeyDown),k.a.closeAll()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.presetId;t!==e.match.params.presetId&&this.fetchPreset(t)}},{key:"getDefaultModelParameters",value:function(){return{responseLength:64,temperature:this.getDefaultTemperature(this.defaultEngine),topP:1,frequencyPenalty:0,presencePenalty:0}}},{key:"getDefaultTemperature",value:function(e){return Object(I.d)(e)?0:.7}},{key:"loadInitialQueryParams",value:function(){var e=v.a.parse(this.props.location.search);e.overrideHost&&this.setState({overrideHost:e.overrideHost}),e.prompt&&this.getEditor().hijackInitialState(e.prompt),e.temperature&&this.setModelParameter("temperature",parseFloat(e.temperature)),e.frequency_penalty&&this.setModelParameter("frequencyPenalty",parseFloat(e.frequency_penalty)),e.response_length&&this.setModelParameter("responseLength",parseInt(e.response_length)),e.stop_sequence&&this.setState({stopSequence:[e.stop_sequence]})}},{key:"fetchPreset",value:function(e){var t=this;if(e)if(this.setState({examplePreset:!1}),0!==e.indexOf("default-"))this.setState({isLoadingPreset:!0}),C.a.getPresetById("preset-".concat(e)).then((function(e){return 404===e.status?Promise.reject(new D.b("Sorry, we couldn't find the requested preset!")):e.json()})).then((function(e){var n=e.preset;if(e.error||!n)return Promise.reject(new Error(e.error.message||"No preset in response"));var a=n.parameters;t.applyPresetState({id:n.id,title:n.title,description:n.description,isOwner:n.is_owner,prompt:n.prompt,engine:a.engine,responseLength:a.max_tokens,temperature:a.temperature,topP:a.top_p,stopSequence:a.stop,startSequence:a.start_sequence,restartSequence:a.restart_sequence,frequencyPenalty:a.frequency_penalty,presencePenalty:a.presence_penalty})})).catch((function(e){w.a.danger(e instanceof D.b?e.message:"Could not fetch the requested preset, if this issue persists please contact support."),console.error(e)})).finally((function(){t.setState({isLoadingPreset:!1})}));else{var n=Re.find((function(t){return t.id===e}));if(n&&!n.loadFromExamples)this.applyPresetState(n);else{var r=G.a.find((function(t){return t.id===e}));if(r){var o=Object(a.a)({title:r.title||"Unnamed example",description:r.description||"",prompt:r.prompt,engine:r.parameters.engine,responseLength:r.parameters.maxTokens},r.parameters);this.setState({examplePreset:!0}),this.applyPresetState(o)}else w.a.danger("Sorry, we couldn't find the requested preset!")}}else this.applyPresetState(null)}},{key:"fetchPresetList",value:function(){var e=this;this.setState({isLoadingPresetList:!0}),C.a.getPresets().then((function(e){return e.json()})).then((function(t){if(!e.isUnmounted){var n=t.presets||[];if(t.error)return Promise.reject(new Error(t.error.message));e.setState({presetList:n})}})).catch((function(e){console.error("Error while fetching preset list",e)})).finally((function(){e.isUnmounted||e.setState({isLoadingPresetList:!1})}))}},{key:"fetchFeatureFlags",value:function(){var e=this;C.a.getFeatureFlags(this.props.orgId).then((function(t){e.isUnmounted||e.setState({allowRestrictedWords:Boolean(t.allow_playground_restricted_words)})})).catch((function(e){console.error("Error while fetching feature flags",e)}))}},{key:"getGenerationEnd",value:function(e){return this.state.cleanGeneratedIndices[e]}},{key:"getCookie",value:function(e,t){return void 0===this.cookies.get(e)?t:this.cookies.get(e)}},{key:"setCookie",value:function(e,t){this.cookies.set(e,t,{path:"/"})}},{key:"unsetCookie",value:function(e){this.cookies.remove(e)}},{key:"setIsChanged",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({isChanged:e})}},{key:"abortCompletion",value:function(){this.state.requestAborter.abort(),Object(U.c)("Playground Completion",{type:"cancel"}),this.setState({requestPending:!1,requestAborter:void 0})}},{key:"getEditor",value:function(){return this.editors[0].textarea.current||null}},{key:"getEditorText",value:function(){var e;return(null===(e=this.getEditor())||void 0===e?void 0:e.getText())||""}},{key:"applyPresetState",value:function(e){var t=this;this.setIsChanged(!1),e?this.setState({currentPreset:e,stopSequence:e.stopSequence?Array.isArray(e.stopSequence)?e.stopSequence:[e.stopSequence]:[],startSequence:e.startSequence||"",restartSequence:e.restartSequence||"",modelParameters:P.a.create({engine:e.engine||this.defaultEngine,responseLength:e.responseLength||64,temperature:e.temperature,topP:e.topP||1,bestOf:e.bestOf||1,frequencyPenalty:e.frequencyPenalty||0,presencePenalty:e.presencePenalty||0})},(function(){t.getEditor().hijackInitialState(e.prompt)})):(this.getEditor().hijackInitialState(""),this.setState({currentPreset:null,stopSequence:[],startSequence:"",restartSequence:"",modelParameters:P.a.create(this.getDefaultModelParameters())})),this.setState({lastPrompt:"",lastGeneration:null,lastGenerationModel:"",showContentFilterAlert:!1,contentFilterModel:"",contentFilterScore:"",contentFilterLabel:""})}},{key:"getPresetObject",value:function(){var e=this.state.modelParameters;return{prompt:this.getEditorText(),parameters:{engine:e.engine.value||this.defaultEngine,temperature:e.temperature.value,max_tokens:e.responseLength.value,top_p:e.topP.value,best_of:e.bestOf.value,frequency_penalty:e.frequencyPenalty.value,presence_penalty:e.presencePenalty.value,start_sequence:this.state.startSequence,restart_sequence:this.state.restartSequence,stop:this.state.stopSequence}}}},{key:"savePreset",value:function(e,t){var n=this,r=this.state.currentPreset,o=this.getPresetObject();return o.id=r.id,(e||t)&&(Object.assign(o,{title:e,description:t}),this.setState({currentPreset:Object(a.a)(Object(a.a)({},r),{},{title:e,description:t})})),this.setState({isSaving:!0}),C.a.updatePreset(o).then((function(e){return e.json()})).then((function(e){if(!e.preset.id)return Promise.reject();n.setIsChanged(!1),w.a.success("Preset saved successfully!")})).catch((function(e){w.a.danger("Oops! We couldn't save your preset. Let support know if this issue persists."),console.error(e)})).finally((function(){n.setState({isSaving:!1})}))}},{key:"createPreset",value:function(e,t){var n=this,a=this.getPresetObject();return a.title=e,a.description=t||"",this.setState({isSaving:!0}),C.a.createPreset(a).then((function(e){return e.json()})).then((function(e){if(!e.preset.id)return Promise.reject();w.a.success("Preset created successfully!"),L.a.replace({pathname:"/playground/p/".concat(R(e.preset))})})).catch((function(e){w.a.danger("Oops! We couldn't create this preset. Let support know if this issue persists."),console.error(e)})).finally((function(){n.setState({isSaving:!1})}))}},{key:"isContentFilterEnabled",value:function(){return!1!==this.state.contentFilterPrefs.sensitive||!1!==this.state.contentFilterPrefs.unsafe}},{key:"deletePreset",value:function(e){var t=this;return this.setState({isDeleting:!0}),C.a.deletePreset(e.id).then((function(e){return e.json()})).then((function(e){if(!e.deleted)return Promise.reject();w.a.success("Preset deleted"),t.fetchPresetList(),L.a.replace({pathname:"/playground"}),Object(U.c)("Delete Preset",{success:!0})})).catch((function(e){Object(U.c)("Delete Preset",{success:!1}),w.a.danger("Oops! We couldn't delete this preset. Let support know if this issue persists."),console.error(e)})).finally((function(){t.setState({isDeleting:!1})}))}},{key:"undoLastGeneration",value:function(){var e=this.getEditor();this.state.showContentFilterAlert&&(this.setState({showContentFilterAlert:!1}),e.highlightLastCompletion(null)),e.hijackInitialState(this.state.lastPrompt),this.setState({lastGeneration:null,contentFilterModel:"",contentFilterScore:"",contentFilterLabel:"",showFeedbackButtons:!1,selectedFeedback:void 0})}},{key:"regenerateLast",value:function(){this.undoLastGeneration(),setTimeout(this.requestCompletion,50)}},{key:"closeActionMenu",value:function(){this.closeActionMenu.closeFn&&(this.closeActionMenu.closeFn(),this.closeActionMenu.closeFn=null)}},{key:"renderSaveButton",value:function(){return p.a.createElement(x.a,{compact:!0,content:p.a.createElement(F.a,{keys:[W.a,"S"]},"Save preset"),onMouseEnterDelay:200},p.a.createElement(O.a,{size:"small",loading:this.state.isSaving,color:O.b.neutral,onClick:this.handleSaveClick},"Save"))}},{key:"renderFooterAlert",value:function(){return this.state.alertMessage?p.a.createElement(Et,{type:this.state.alertType||void 0},this.state.alertMessage):this.state.showRestrictedTermsAlert?p.a.createElement(Ct,null):this.state.showContentFilterAlert?p.a.createElement(kt,{onClickShowContentFilterPrefs:this.handleContentFilterPrefsModalShow,onDismiss:this.handleHideContentFilterAlert,contentFilterLabel:this.state.contentFilterLabel}):this.renderEngineAlert()}},{key:"renderEngineAlert",value:function(){var e=this.state.modelParameters.engine.value;return Nt.includes(e)?p.a.createElement(Et,{type:"note",dismissableId:"instruct-model-info"},"This model is part of the instruct-series beta. Prompts submitted to these models may be used to train and improve future models."," ",p.a.createElement("a",{href:"/docs/engines/the-instruct-series-beta",target:"_blank"},"See additional information.")):At.includes(e)?p.a.createElement(Et,{type:"note",dismissableId:"codex-model-info"},"The Codex models are currently in private beta. Usage is free during this period."," ",p.a.createElement("a",{href:"/docs/engines/codex-series-private-beta",target:"_blank"},"Learn more.")):Dt.includes(e)?p.a.createElement(Et,{type:"note",dismissableId:"filter-model-info"},"This model is part of our content filter series and is fine tuned to detect sensitive or unsafe text."," ",p.a.createElement("a",{href:"/docs/engines/content-filter",target:"_blank"},"See additional information.")):null}},{key:"render",value:function(){var e=this,t=this.state,n=t.lastPrompt,a=t.modelParameters,r=t.requestPending,o=t.showContentFilterAlert,s=t.showContentFilterOverlay,i=this.getEditorText();return p.a.createElement("div",{className:"pg-webface page-body full-width flush"},this.state.showWelcomeInfo&&p.a.createElement(nt,{onClose:this.handleCloseWelcome}),p.a.createElement("div",{className:"pg-main"},p.a.createElement("div",{className:"pg-header"},p.a.createElement("div",{className:"pg-header-section pg-header-title"},p.a.createElement("h1",{className:"pg-page-title heading-large"},"Playground")),p.a.createElement("div",{className:"pg-preset-select-container"},p.a.createElement(Ve,{presetList:this.state.presetList,currentPreset:this.state.examplePreset?"":this.state.currentPreset,activePresetId:_(this.props.match.params.presetId),onChange:this.handlePresetSelect})),p.a.createElement("div",{className:"pg-header-section pg-header-actions"},this.renderSaveButton(),p.a.createElement(O.a,{size:"small",color:O.b.neutral,onClick:this.handleCodeExportClick},"View code"),p.a.createElement(O.a,{size:"small",color:O.b.neutral,onClick:this.handleShareClick},"Share"),p.a.createElement(T.a,{content:this.renderActionMenu,placement:"bottomRight"},p.a.createElement(O.a,{size:"small",color:O.b.neutral,onClick:this.handleShareClick},p.a.createElement(E.u,null))),p.a.createElement(O.a,{className:"pg-advanced-toggle",size:"small",color:O.b.neutral,onClick:this.toggleRightPanelMobile,"aria-label":"Toggle parameters"},p.a.createElement(E.n,null)))),p.a.createElement("div",{className:"pg-body"},p.a.createElement("div",{className:"pg-left"},p.a.createElement("div",{className:Object(h.a)("completions-container",s&&"completions-blur"),onKeyUp:this.onEditorKeyUp},this.editors.map((function(t,n){return p.a.createElement(p.a.Fragment,{key:n},e.isCodeEditor()?p.a.createElement(qt,{initialText:e.previousEditorText,editor:e.editors[n],ref:e.editors[n].textarea,language:e.state.codeLanguage,onKeyDown:e.onKeyDown,onTextChange:e.onTextChange}):p.a.createElement(De,{initialText:e.previousEditorText,editor:e.editors[n],onTextChange:e.onTextChange,probsType:e.state.probsType||"orig",showProbs:null!==e.state.probsType&&!o,truncateGeneratedIndices:e.truncateGeneratedIndices}))})),this.renderFooterAlert(),s&&p.a.createElement(ft,{onAccept:this.handleHideContentFilterWarningOverlay})),p.a.createElement("div",{className:"pg-footer"},p.a.createElement("div",{className:"pg-footer-left"},p.a.createElement(x.a,{compact:!0,content:p.a.createElement(F.a,{keys:[W.a,"Enter"]},"Generate"),isOpen:!r&&void 0,onMouseEnterDelay:200},p.a.createElement(O.a,{size:"small",color:r?O.b.neutral:O.b.primary,onClick:this.handleGenerateClick,className:"pg-submit-btn","data-testid":"pg-submit-btn"},r?"Cancel":"Generate")),p.a.createElement(x.a,{compact:!0,content:p.a.createElement(F.a,{keys:[W.a,W.b,"U"]},"Undo last"),onMouseEnterDelay:200},p.a.createElement(O.a,{size:"small",color:O.b.neutral,"aria-label":"Undo",disabled:r||!n,onClick:this.handleUndoClick},p.a.createElement(y.q,null))),p.a.createElement(x.a,{compact:!0,content:p.a.createElement(F.a,{keys:[W.a,W.b,"Enter"]},"Regenerate"),onMouseEnterDelay:200},p.a.createElement(O.a,{size:"small",color:O.b.neutral,"aria-label":"Regenerate",disabled:r||!n,onClick:this.handleRegenerateClick},p.a.createElement(y.p,null))),this.state.showFeedbackButtons&&p.a.createElement(p.a.Fragment,null,p.a.createElement(x.a,{compact:!0,content:p.a.createElement(F.a,{keys:[W.a,W.b,"Down"]},"Poor completion"),onMouseEnterDelay:200},p.a.createElement(O.a,{className:"feedback-btn"+("thumbsDown"===this.state.selectedFeedback?" selected":""),size:"small",color:O.b.negative,variant:O.c.minimal,"aria-label":"Thumbs down",onClick:function(){return e.handleFeedback("thumbsDown")}},p.a.createElement(y.s,null))),p.a.createElement(x.a,{compact:!0,content:p.a.createElement(F.a,{keys:[W.a,W.b,"Up"]},"Useful completion"),onMouseEnterDelay:200},p.a.createElement(O.a,{className:"feedback-btn"+("thumbsUp"===this.state.selectedFeedback?" selected":""),size:"small",color:O.b.primary,variant:O.c.minimal,"aria-label":"Thumbs up",onClick:function(){return e.handleFeedback("thumbsUp")}},p.a.createElement(y.t,null))))),p.a.createElement("div",{className:"pg-footer-right"},p.a.createElement(ht,{text:i,engine:a.engine.value,bestOf:a.bestOf.value,responseLength:a.responseLength.value,subscription:this.props.subscription}),this.isCodeEditor()&&p.a.createElement(Lt,{onChange:this.updateCodeLanguage,language:this.state.codeLanguage})))),p.a.createElement("div",{className:Object(h.a)("pg-right",this.state.rightPanelVisibleMobile&&"pg-visible-mobile")},p.a.createElement("div",{className:"pg-right-panel-mask",onClick:this.toggleRightPanelMobile}),p.a.createElement(M,{className:"pg-right-content"},p.a.createElement("button",{className:"pg-right-panel-mobile-close",onClick:this.toggleRightPanelMobile},"\xd7"),p.a.createElement(ie,{appParameters:a,probsType:this.state.probsType,stopSequence:this.state.stopSequence,startSequence:this.state.startSequence,startSequenceEnabled:this.state.startSequenceEnabled,restartSequence:this.state.restartSequence,restartSequenceEnabled:this.state.restartSequenceEnabled,onChangeProbs:this.updateProbsType,onChangeRestart:this.updateRestart,onChangeRestartEnabled:this.updateRestartEnabled,onChangeStop:this.updateStop,onChangeStart:this.updateStart,onChangeStartEnabled:this.updateStartEnabled}))),this.state.showSaveModal&&p.a.createElement(Xe,{currentPreset:this.state.currentPreset,onSave:this.handleSaveModalSubmit,onCancel:this.handleSaveModalCancel,savingForShare:this.savingForShare}),this.state.showShareModal&&this.state.currentPreset&&p.a.createElement(Ke,{preset:this.state.currentPreset,onClose:this.handleShareModalClose,currentModel:a.engine.value}),this.state.showCodeModal&&p.a.createElement(at.b,{onClose:this.handleCodeModalClose,preset:this.getPresetObject()}),this.state.showContentFilterPrefsModal&&p.a.createElement(Pt,{onClose:this.handleContentFilterPrefsModalClose,onChange:this.handleContentFilterPrefsChange,value:this.state.contentFilterPrefs}),p.a.createElement(m.a,{when:Boolean(this.state.isChanged&&i),message:this.onNavigate}))))}}]),n}(z);Rt.contextType=S.a;t.default=Object(m.k)(Rt)}}]);